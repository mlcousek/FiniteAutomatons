@model AutomatonViewModel
@{
    ViewData["Title"] = "Home";
    var hasExecuted = Model != null && Model.HasExecuted;
    var inputLen = Model?.Input?.Length ?? 0;
    var atStartPos = hasExecuted && Model!.Position <= 0;
    var atEndPos = hasExecuted && Model!.Position >= inputLen && inputLen > 0;
    var disableAllUntilStart = Model == null || !hasExecuted; // initial state before Start
    var analysis = ViewData["MinimizationAnalysis"] as FiniteAutomatons.Services.Interfaces.MinimizationAnalysis;
}
<div class="automaton-workspace">
    <!-- Global messages (conversion / errors) -->
    @if (TempData["ErrorMessage"] is string err && !string.IsNullOrWhiteSpace(err))
    {
        <div class="alert alert-error minimization-alert" data-test="error-message">@err</div>
    }
    @if (TempData["ConversionMessage"] is string conv && !string.IsNullOrWhiteSpace(conv))
    {
        <div class="alert alert-info minimization-alert" data-test="conversion-message">@conv</div>
    }
    <!-- Main Content Area -->
    <div class="workspace-grid">
        <!-- Left Section - Create Automaton -->
        <div class="create-section">
            <div class="section-header">
                <h2>AUTOMATON</h2>
                <button id="panelsLockBtn" class="panel-lock-btn" title="Lock / unlock panels" aria-pressed="false" type="button">
                    <i class="fas fa-lock-open"></i>
                </button>
            </div>
            <div class="create-content">
                <style>
                    /* Small styles for draggable panels */
                    /* Place lock inline with header title */
                    .create-section > .section-header { display: flex; align-items: center; gap: 0.5rem; justify-content: center; white-space: nowrap; }
                    .create-section > .section-header h2 { margin: 0; }
                    .panel-lock-btn { background:transparent;border:0;color:var(--bs-body-color);cursor:pointer;font-size:0.95rem;padding:0 }
                    .panel-lock-btn i { font-size:1.05rem; display:block }
                    .automaton-detail-section[draggable="true"] { cursor: move; }
                    .automaton-detail-section.dragging { opacity:0.6; }
                    .automaton-detail-section.locked { cursor: default; }
                </style>

                <div class="input-area" id="panelContainer">
                    @if (Model != null)
                    {
                        <!-- Alphabet Section -->
                        <div class="automaton-detail-section" data-panel-id="alphabet">
                            <h4>Alphabet</h4>
                            <div class="alphabet-display">
                                @if (Model.Alphabet != null && Model.Alphabet.Count > 0)
                                {
                                    <span class="alphabet-symbols">{ @string.Join(", ", Model.Alphabet.Select(c => c == '\0' ? "ε" : c.ToString())) }</span>
                                }
                                else
                                {
                                    <span class="placeholder-text">No symbols defined</span>
                                }
                            </div>
                        </div>

                        <!-- Source Regex Section (if created from regex) -->
                        @if (!string.IsNullOrWhiteSpace(Model.SourceRegex))
                        {
                            <div class="automaton-detail-section" data-panel-id="source-regex">
                                <h4>Source Regular Expression</h4>
                                <div class="source-regex-display">
                                    <code class="regex-code">@Model.SourceRegex</code>
                                </div>
                            </div>
                        }

                        <!-- States Section -->
                        <div class="automaton-detail-section" data-panel-id="states">
                            <h4>States</h4>
                            <div class="states-display">
                                @if (Model.States != null && Model.States.Count > 0)
                                {
                                    <ul class="states-list">
                                        @foreach (var state in Model.States.OrderBy(s => s.Id))
                                        {
                                            var isActive = (Model.CurrentStates != null && Model.CurrentStates.Contains(state.Id)) || (Model.CurrentStateId == state.Id);
                                            <li class="state-item @(isActive ? "state-active" : "")" data-state-id="@state.Id">
                                                <span class="state-id">q@(state.Id)</span>
                                                @if (state.IsStart)
                                                {
                                                    <span class="state-badge badge-start">Start</span>
                                                }
                                                @if (state.IsAccepting)
                                                {
                                                    <span class="state-badge badge-accepting">Accepting</span>
                                                }
                                            </li>
                                        }
                                    </ul>
                                }
                                else
                                {
                                    <span class="placeholder-text">No states defined</span>
                                }
                            </div>
                        </div>

                        <!-- Transitions Section -->
                        <div class="automaton-detail-section" data-panel-id="transitions">
                            <h4>Transitions</h4>
                            <div class="transitions-display">
                                @if (Model.Transitions != null && Model.Transitions.Count > 0)
                                {
                                    <ul class="transitions-list">
                                        @foreach (var transition in Model.Transitions.OrderBy(t => t.FromStateId).ThenBy(t => t.Symbol).ThenBy(t => t.ToStateId))
                                        {
                                            <li class="transition-item" data-from="@transition.FromStateId" data-to="@transition.ToStateId" data-symbol="@(transition.Symbol == '\0' ? "" : transition.Symbol.ToString())">
                                                @if (Model.Type == AutomatonType.PDA)
                                                {
                                                    <span class="transition-text">
                                                        q@(transition.FromStateId) -- @(transition.Symbol == '\0' ? 'ε' : transition.Symbol.ToString()) \
                                                        / @(transition.StackPop.HasValue ? (transition.StackPop.Value == '\0' ? 'ε' : transition.StackPop.Value.ToString()) : "-")
                                                        -> @(string.IsNullOrEmpty(transition.StackPush) ? "-" : transition.StackPush) -> q@(transition.ToStateId)
                                                    </span>
                                                }
                                                else
                                                {
                                                    <span class="transition-text">q@(transition.FromStateId) -- @(transition.Symbol == '\0' ? 'ε' : transition.Symbol.ToString()) -> q@(transition.ToStateId)</span>
                                                }
                                            </li>
                                        }
                                    </ul>
                                }
                                else
                                {
                                    <span class="placeholder-text">No transitions defined</span>
                                }
                            </div>
                        </div>

                        <!-- Minimization Mapping Section (raw report only) -->
                        @if (!string.IsNullOrEmpty(Model.MinimizationReport))
                        {
                            <div class="automaton-detail-section minimization-section" data-panel-id="minimization">
                                <h4>Minimization Mapping</h4>
                                <div class="minimization-content">
                                    <pre class="minimization-report">@Model.MinimizationReport</pre>
                                </div>
                            </div>
                        }

                        <!-- Execution State Section (Debug Info) -->
                        @if (Model.HasExecuted || Model.Position > 0 || Model.CurrentStateId.HasValue || (Model.CurrentStates != null && Model.CurrentStates.Count > 0))
                        {
                            <div class="automaton-detail-section execution-state-section" data-panel-id="execution">
                                <h4>Execution State</h4>
                                <div class="execution-state-display">
                                    <div class="execution-state-item">
                                        <span class="execution-label">Current Position:</span>
                                        <span class="execution-value">@Model.Position / @(Model.Input?.Length ?? 0)</span>
                                    </div>

                                    @if (Model.Type == AutomatonType.DFA || Model.Type == AutomatonType.PDA)
                                    {
                                        <div class="execution-state-item">
                                            <span class="execution-label">Current State:</span>
                                            <span class="execution-value">
                                                @if (Model.CurrentStateId.HasValue)
                                                {
                                                    <span class="state-highlight">@($"q{Model.CurrentStateId}")</span>
                                                }
                                                else
                                                {
                                                    <span class="placeholder-text">-</span>
                                                }
                                            </span>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="execution-state-item">
                                            <span class="execution-label">Current States:</span>
                                            <span class="execution-value">
                                                @if (Model.CurrentStates != null && Model.CurrentStates.Count > 0)
                                                {
                                                    <span class="state-highlight">{ @string.Join(", ", Model.CurrentStates.OrderBy(s => s).Select(s => "q" + s)) }</span>
                                                }
                                                else
                                                {
                                                    <span class="placeholder-text">-</span>
                                                }
                                            </span>
                                        </div>
                                    }

                                    <div class="execution-state-item">
                                        <span class="execution-label">Next Symbol:</span>
                                        <span class="execution-value">
                                            @if (!string.IsNullOrEmpty(Model.Input) && Model.Position < Model.Input.Length)
                                            {
                                                <span class="symbol-highlight">'@Model.Input[Model.Position]'</span>
                                            }
                                            else
                                            {
                                                <span class="placeholder-text">End of input</span>
                                            }
                                        </span>
                                    </div>

                                    @* Show Result when input is fully read *@
                                    @if (Model.Position >= (Model.Input?.Length ?? 0) && Model.IsAccepted.HasValue)
                                    {
                                        <div class="execution-state-item result-highlight">
                                            <span class="execution-label">Result:</span>
                                            <span class="execution-value">
                                                @if (Model.IsAccepted.Value)
                                                {
                                                    <span class="result-badge result-accepted">✓ ACCEPTED</span>
                                                }
                                                else
                                                {
                                                    <span class="result-badge result-rejected">✗ REJECTED</span>
                                                }
                                            </span>
                                        </div>
                                    }

                                    <div class="execution-state-item">
                                        <span class="execution-label">Is Accepted:</span>
                                        <span class="execution-value">
                                            @if (Model.IsAccepted.HasValue)
                                            {
                                                if (Model.IsAccepted.Value)
                                                {
                                                    <span class="acceptance-status accepted">✓ Accepted</span>
                                                }
                                                else
                                                {
                                                    <span class="acceptance-status rejected">✗ Rejected</span>
                                                }
                                            }
                                            else
                                            {
                                                <span class="acceptance-status pending">⧗ Pending</span>
                                            }
                                        </span>
                                    </div>

                                    @if (Model.Type == AutomatonType.PDA && !string.IsNullOrEmpty(Model.StackSerialized))
                                    {
                                        <div class="execution-state-item">
                                            <span class="execution-label">Stack:</span>
                                            <span class="execution-value stack-value">
                                                @try
                                                {
                                                    var stack = System.Text.Json.JsonSerializer.Deserialize<List<char>>(Model.StackSerialized);
                                                    if (stack != null && stack.Count > 0)
                                                    {
                                                        <span class="stack-highlight">[ @string.Join(", ", stack.Select(c => c == '\0' ? "ε" : c.ToString())) ]</span>
                                                        <span class="stack-hint">(top first)</span>
                                                    }
                                                    else
                                                    {
                                                        <span class="placeholder-text">Empty</span>
                                                    }
                                                }
                                                catch
                                                {
                                                    <span class="placeholder-text">-</span>
                                                }
                                            </span>
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <p class="placeholder-text">No automaton loaded</p>
                    }
                </div>
            </div>
        </div>

        <!-- Right Section - Graph Canvas -->
        <div class="graph-section">
            <div class="section-header">
                <h2>GRAPH</h2>
            </div>
            <div class="graph-content">
                <canvas id="automatonCanvas" class="automaton-canvas"></canvas>
            </div>
        </div>
    </div>

    <!-- Bottom Control Sections -->
    <form asp-controller="Automaton" method="post" id="automatonForm">
        @if (Model != null)
        {
            <input type="hidden" asp-for="Type" />
            <input type="hidden" asp-for="HasExecuted" />
            <input type="hidden" asp-for="Position" />
            <input type="hidden" asp-for="CurrentStateId" />
            <input type="hidden" asp-for="IsAccepted" />
            <input type="hidden" asp-for="StateHistorySerialized" />
            <input type="hidden" asp-for="StackSerialized" />
            <input type="hidden" asp-for="IsCustomAutomaton" />
            <input type="hidden" name="targetType" id="targetTypeField" />
            @if (Model.States != null)
            {
                @for (int i = 0; i < Model.States.Count; i++)
                {
                    <input type="hidden" name="States.Index" value="@i" />
                    <input type="hidden" name="States[@i].Id" value="@Model.States[i].Id" />
                    <input type="hidden" name="States[@i].IsStart" value="@Model.States[i].IsStart.ToString().ToLowerInvariant()" />
                    <input type="hidden" name="States[@i].IsAccepting" value="@Model.States[i].IsAccepting.ToString().ToLowerInvariant()" />
                }
            }
            @if (Model.Transitions != null)
            {
                @for (int i = 0; i < Model.Transitions.Count; i++)
                {
                    <input type="hidden" name="Transitions.Index" value="@i" />
                    <input type="hidden" name="Transitions[@i].FromStateId" value="@Model.Transitions[i].FromStateId" />
                    <input type="hidden" name="Transitions[@i].ToStateId" value="@Model.Transitions[i].ToStateId" />
                    <input type="hidden" name="Transitions[@i].Symbol" value="@Model.Transitions[i].Symbol" />
                }
            }
            @if (Model.CurrentStates != null)
            {
                @for (int i = 0; i < Model.CurrentStates.Count; i++)
                {
                    <input type="hidden" name="CurrentStates.Index" value="@i" />
                    <input type="hidden" name="CurrentStates[@i]" value="@Model.CurrentStates.ElementAt(i)" />
                }
            }
        }

        <div class="control-sections">
            <!-- Input Section -->
            <div class="control-section input-section">
                <div class="section-header-custom">
                    <h2>INPUT</h2>
                </div>
                <div class="control-content-left">
                    <input type="text" class="input-field" name="Input" id="inputField"
                       placeholder="Enter input string..."
                       value="@(Model != null ? Model.Input : "")"
                       @(Model != null && Model.HasExecuted ? "readonly" : "") 
                       style="padding: 0.75rem 7rem;"
                       maxlength="100" />
                </div>
            </div>

            <!-- Simulate Section -->
            <div class="control-section simulate-section">
                <div class="section-header-custom">
                    <h2>SIMULATE</h2>
                </div>
                <div class="control-content simulate-buttons">
                    @* Start / Reset *@
                    @if (!hasExecuted)
                    {
                        <button type="submit" class="control-btn simulate-btn"
                                asp-controller="AutomatonExecution" asp-action="Start"
                                title="Start" data-sim-primary="start">
                            <i class="fas fa-play-circle"></i>
                            <span>Start</span>
                        </button>
                    }
                    @if (hasExecuted)
                    {
                        <button type="submit" class="control-btn simulate-btn"
                                asp-controller="AutomatonExecution" asp-action="Reset"
                                title="Reset" data-sim-primary="reset">
                            <i class="fas fa-undo"></i>
                            <span>Reset</span>
                        </button>
                    }

                    @* BackToStart *@
                    @if (disableAllUntilStart || atStartPos)
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="BackToStart" title="Back to start" data-sim-action="backToStart" disabled>
                            <i class="fas fa-undo"></i>
                            <span>Back to start</span>
                        </button>
                    }
                    else
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="BackToStart" title="Back to start" data-sim-action="backToStart">
                            <i class="fas fa-undo"></i>
                            <span>Back to start</span>
                        </button>
                    }

                    @* StepBackward *@
                    @if (disableAllUntilStart || atStartPos)
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="StepBackward" title="Step back" data-sim-action="stepBackward" disabled>
                            <i class="fas fa-step-backward"></i>
                            <span>Step back</span>
                        </button>
                    }
                    else
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="StepBackward" title="Step back" data-sim-action="stepBackward">
                            <i class="fas fa-step-backward"></i>
                            <span>Step back</span>
                        </button>
                    }

                    @* StepForward *@
                    @if (disableAllUntilStart || atEndPos)
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="StepForward" title="Read next" data-sim-action="stepForward" disabled>
                            <i class="fas fa-step-forward"></i>
                            <span>Read next</span>
                        </button>
                    }
                    else
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="StepForward" title="Read next" data-sim-action="stepForward">
                            <i class="fas fa-step-forward"></i>
                            <span>Read next</span>
                        </button>
                    }

                    @* ExecuteAll *@
                    @if (disableAllUntilStart || atEndPos)
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="ExecuteAll" title="Read all" data-sim-action="executeAll" disabled>
                            <i class="fas fa-forward"></i>
                            <span>Read all</span>
                        </button>
                    }
                    else
                    {
                        <button type="submit" class="control-btn simulate-btn" asp-controller="AutomatonExecution" asp-action="ExecuteAll" title="Read all" data-sim-action="executeAll">
                            <i class="fas fa-forward"></i>
                            <span>Read all</span>
                        </button>
                    }
                </div>
            </div>

            <!-- Automaton Type Section -->
            <div class="control-section type-section">
                <div class="section-header-custom">
                    <h2>AUTOMATON TYPE</h2>
                </div>
                <div class="control-content type-buttons">
                    <button type="button" class="control-btn type-btn @(Model != null && Model.Type == AutomatonType.DFA ? "active" : "")" data-type="DFA">DFA</button>
                    <button type="button" class="control-btn type-btn @(Model != null && Model.Type == AutomatonType.NFA ? "active" : "")" data-type="NFA">NFA</button>
                    <button type="button" class="control-btn type-btn @(Model != null && Model.Type == AutomatonType.EpsilonNFA ? "active" : "")" data-type="EpsilonNFA">ε-NFA</button>
                    <button type="button" class="control-btn type-btn @(Model != null && Model.Type == AutomatonType.PDA ? "active" : "")" data-type="PDA">PDA</button>
                </div>
            </div>
            @if (Model?.Type == AutomatonType.DFA && analysis != null && analysis.SupportsMinimization)
            {
            <!-- Minimalize Section -->
            <div class="control-section minimize-section">
                <div class="section-header-custom">
                    <h2>MINIMALIZE</h2>
                </div>
                <div class="control-content-right">
                        @{
                            // Ensure this is evaluated as Razor code so the local variable is available to subsequent Razor logic.
                        var executionStarted = Model.HasExecuted || Model.Position > 0;
                        }
                        @if (analysis.IsMinimal)
                        {
                            <button type="button" class="control-btn minimize-btn" disabled title="Already minimal">
                                Minimalize (Already Minimal)
                            </button>
                        }
                        else if (executionStarted)
                        {
                            <button type="button" class="control-btn minimize-btn" disabled title="Execution started">
                                Minimalize (Disabled - Execution Started)
                            </button>
                        }
                        else
                        {
                            <button type="submit" class="control-btn minimize-btn"
                                    asp-controller="AutomatonExecution" asp-action="Minimalize" title="Minimalize DFA">
                                Minimalize (→ @analysis.MinimizedStateCount)
                            </button>
                    }
                </div>
            </div>
            }
        </div>
    </form>
    <div class="control-sections">
        <div class="control-section input-section">
            <div class="section-header-custom">
                <h2 style="margin:0;">GENERATE INPUT</h2>
            </div>
            <div class="control-content-left" style="text-align:center; margin-bottom:0.5rem;">
                <button id="generateInputModalBtn" class="control-btn" type="button" 
                        style="min-width: 300px;"
                        @(Model == null || hasExecuted ? "disabled" : "")
                        title="@(hasExecuted ? "Reset execution to generate new input" : "Generate test input for the automaton")">
                    <i class="fas fa-keyboard"></i>
                    <span>Generate Test Input</span>
                </button>
            </div>

            <!-- Input Generation Modal -->
            <div id="generateInputModal" class="modal modern-modal" style="display:none;">
                <div class="modal-content modern-modal-content">
                    <div class="modal-header">
                        <div class="modal-header-content">
                            <i class="fas fa-keyboard modal-icon"></i>
                            <h3 class="modal-title">Generate Test Input</h3>
                            <button id="inputModalLockBtn" class="panel-lock-btn" title="Lock / unlock sections" aria-pressed="false" type="button">
                                <i class="fas fa-lock-open"></i>
                            </button>
                        </div>
                        <button class="modal-close modern-close" id="generateInputModalClose" type="button">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body" id="inputModalSectionsContainer">
                        @{
                            // Helper method to render hidden automaton fields for forms
                            void RenderAutomatonHiddenFields()
                            {
                                if (Model != null)
                                {
                                    <input type="hidden" name="Type" value="@Model.Type" />
                                    <input type="hidden" name="IsCustomAutomaton" value="@Model.IsCustomAutomaton.ToString().ToLowerInvariant()" />
                                    
                                    if (Model.States != null)
                                    {
                                        for (int i = 0; i < Model.States.Count; i++)
                                        {
                                            <input type="hidden" name="States[@i].Id" value="@Model.States[i].Id" />
                                            <input type="hidden" name="States[@i].IsStart" value="@Model.States[i].IsStart.ToString().ToLowerInvariant()" />
                                            <input type="hidden" name="States[@i].IsAccepting" value="@Model.States[i].IsAccepting.ToString().ToLowerInvariant()" />
                                        }
                                    }
                                    
                                    if (Model.Transitions != null)
                                    {
                                        for (int i = 0; i < Model.Transitions.Count; i++)
                                        {
                                            <input type="hidden" name="Transitions[@i].FromStateId" value="@Model.Transitions[i].FromStateId" />
                                            <input type="hidden" name="Transitions[@i].ToStateId" value="@Model.Transitions[i].ToStateId" />
                                            <input type="hidden" name="Transitions[@i].Symbol" value="@Model.Transitions[i].Symbol" />
                                            if (Model.Type == AutomatonType.PDA)
                                            {
                                                if (Model.Transitions[i].StackPop.HasValue)
                                                {
                                                    <input type="hidden" name="Transitions[@i].StackPop" value="@Model.Transitions[i].StackPop" />
                                                }
                                                if (!string.IsNullOrEmpty(Model.Transitions[i].StackPush))
                                                {
                                                    <input type="hidden" name="Transitions[@i].StackPush" value="@Model.Transitions[i].StackPush" />
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        
                        <!-- Quick Generation Options -->
                        <div class="input-section-card" data-section-id="quick">
                            <div class="section-card-header">
                                <i class="fas fa-bolt"></i>
                                <h4>Quick Generate</h4>
                            </div>
                            <div class="button-grid-2">
                                <form asp-controller="InputGeneration" asp-action="GenerateAcceptingString" method="post">
                                    @{ RenderAutomatonHiddenFields(); }
                                    <button type="submit" class="modern-btn btn-success">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Shortest Accepting</span>
                                    </button>
                                </form>
                                <form asp-controller="InputGeneration" asp-action="GenerateRejectingString" method="post">
                                    @{ RenderAutomatonHiddenFields(); }
                                    <button type="submit" class="modern-btn btn-danger">
                                        <i class="fas fa-times-circle"></i>
                                        <span>Rejecting</span>
                                    </button>
                                </form>
                            </div>
                        </div>

                        <!-- Random String Generation -->
                        <div class="input-section-card" data-section-id="random">
                            <div class="section-card-header">
                                <i class="fas fa-random"></i>
                                <h4>Random String</h4>
                            </div>
                            <form asp-controller="InputGeneration" asp-action="GenerateRandomString" method="post" class="modern-form">
                                @{ RenderAutomatonHiddenFields(); }
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-arrow-down"></i>
                                            Min Length
                                        </label>
                                        <input type="number" name="minLength" value="0" min="0" max="50" class="modern-input" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-arrow-up"></i>
                                            Max Length
                                        </label>
                                        <input type="number" name="maxLength" value="10" min="1" max="50" class="modern-input" />
                                    </div>
                                </div>
                                <button type="submit" class="modern-btn btn-primary btn-full">
                                    <i class="fas fa-dice"></i>
                                    Generate Random
                                </button>
                            </form>
                        </div>

                        <!-- Random Accepting String with Parameters -->
                        <div class="input-section-card" data-section-id="random-accepting">
                            <div class="section-card-header">
                                <i class="fas fa-check-double"></i>
                                <h4>Random Accepting (Advanced)</h4>
                            </div>
                            <form asp-controller="InputGeneration" asp-action="GenerateRandomAcceptingString" method="post" class="modern-form">
                                @{ RenderAutomatonHiddenFields(); }
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-arrow-down"></i>
                                            Min Length
                                        </label>
                                        <input type="number" name="minLength" value="0" min="0" max="100" class="modern-input" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-arrow-up"></i>
                                            Max Length
                                        </label>
                                        <input type="number" name="maxLength" value="50" min="1" max="100" class="modern-input" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">
                                        <i class="fas fa-redo"></i>
                                        Max Attempts
                                    </label>
                                    <input type="number" name="maxAttempts" value="100" min="10" max="1000" class="modern-input" />
                                    <small class="form-hint">Higher values increase chance of finding accepting strings</small>
                                </div>
                                <button type="submit" class="modern-btn btn-success btn-full">
                                    <i class="fas fa-random"></i>
                                    Generate Random Accepting
                                </button>
                            </form>
                        </div>

                        <!-- Special Test Cases -->
                        @if (Model?.Type == AutomatonType.NFA || Model?.Type == AutomatonType.EpsilonNFA)
                        {
                            <div class="input-section-card card-special" data-section-id="special">
                                <div class="section-card-header">
                                    <i class="fas fa-star"></i>
                                    <h4>Special Cases</h4>
                                </div>
                                <div class="button-grid-1">
                                    @if (Model?.Type == AutomatonType.NFA || Model?.Type == AutomatonType.EpsilonNFA)
                                    {
                                        <form asp-controller="InputGeneration" asp-action="GenerateNondeterministicCase" method="post">
                                            @{ RenderAutomatonHiddenFields(); }
                                            <button type="submit" class="modern-btn btn-info">
                                                <i class="fas fa-code-branch"></i>
                                                <span>Nondeterministic Test</span>
                                            </button>
                                        </form>
                                    }
                                    @if (Model?.Type == AutomatonType.EpsilonNFA)
                                    {
                                        <form asp-controller="InputGeneration" asp-action="GenerateEpsilonCase" method="post">
                                            @{ RenderAutomatonHiddenFields(); }
                                            <button type="submit" class="modern-btn btn-info">
                                                <i class="fas fa-project-diagram"></i>
                                                <span>ε-Transition Test</span>
                                            </button>
                                        </form>
                                    }
                                </div>
                            </div>
                        }

                        <!-- Interesting Cases -->
                        <div class="input-section-card" data-section-id="interesting">
                            <div class="section-card-header">
                                <i class="fas fa-lightbulb"></i>
                                <h4>Interesting Test Cases</h4>
                            </div>
                            <div class="button-grid-2">
                                <form asp-controller="InputGeneration" asp-action="GenerateInterestingCase" method="post">
                                    <input type="hidden" name="caseType" value="repeated" />
                                    @{ RenderAutomatonHiddenFields(); }
                                    <button type="submit" class="modern-btn btn-outline">
                                        <i class="fas fa-repeat"></i>
                                        Repeated
                                    </button>
                                </form>
                                <form asp-controller="InputGeneration" asp-action="GenerateInterestingCase" method="post">
                                    <input type="hidden" name="caseType" value="alternating" />
                                    @{ RenderAutomatonHiddenFields(); }
                                    <button type="submit" class="modern-btn btn-outline">
                                        <i class="fas fa-exchange-alt"></i>
                                        Alternating
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="control-section">
            <div class="section-header-custom">
                <h2 style="margin:0;">GENERATE AUTOMATON</h2>
            </div>
            <div class="control-content-left" style="text-align:center; margin-bottom:0.5rem;">
                <button id="generateModalBtn" class="control-btn" type="button">
                    <i class="fas fa-random"></i>
                    <span>Generate Automaton</span>
                </button>
            </div>

            <!-- Modal markup -->
            <div id="generateModal" class="modal modern-modal" style="display:none;">
                <div class="modal-content modern-modal-content">
                    <div class="modal-header">
                        <div class="modal-header-content">
                            <i class="fas fa-random modal-icon"></i>
                            <h3 class="modal-title">Generate Automaton</h3>
                        </div>
                        <button class="modal-close modern-close" id="generateModalClose" type="button">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <!-- Quick Preset Generation -->
                        <div class="input-section-card" data-section-id="preset">
                            <div class="section-card-header">
                                <i class="fas fa-bolt"></i>
                                <h4>Quick Generate</h4>
                            </div>
                            <div class="modern-form">
                                <div class="form-group">
                                    <label for="generateFamilySelect" class="form-label">
                                        <i class="fas fa-sitemap"></i>
                                        Automaton Type
                                    </label>
                                    <select id="generateFamilySelect" class="modern-input">
                                        <option value="DFA">DFA</option>
                                        <option value="NFA">NFA</option>
                                        <option value="EpsilonNFA">ε-NFA</option>
                                    </select>
                                </div>
                                
                                <form id="generatePresetForm" asp-controller="AutomatonGeneration" asp-action="GeneratePreset" method="post">
                                    <div class="form-group">
                                        <label for="generateOptionSelect" class="form-label">
                                            <i class="fas fa-list"></i>
                                            Preset Template
                                        </label>
                                        <select id="generateOptionSelect" name="preset" class="modern-input">
                                            <!-- options populated by JS on open -->
                                        </select>
                                    </div>
                                    <button type="submit" class="modern-btn btn-primary btn-full" style="margin-top: 0.5rem;">
                                        <i class="fas fa-magic"></i>
                                        Generate from Preset
                                    </button>
                                </form>
                            </div>
                        </div>

                        <!-- Custom Parameters Generation -->
                        <div class="input-section-card" data-section-id="custom">
                            <div class="section-card-header">
                                <i class="fas fa-sliders-h"></i>
                                <h4>Custom Parameters</h4>
                            </div>
                            <form asp-controller="AutomatonGeneration" asp-action="GenerateRandomAutomaton" method="post" class="modern-form">
                                <div class="form-group">
                                    <label class="form-label">
                                        <i class="fas fa-sitemap"></i>
                                        Type
                                    </label>
                                    <select name="Type" class="modern-input">
                                        <option value="0">DFA</option>
                                        <option value="1">NFA</option>
                                        <option value="2">ε-NFA</option>
                                        <option value="3">PDA</option>
                                    </select>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-circle"></i>
                                            States
                                        </label>
                                        <input type="number" name="StateCount" value="5" min="1" max="20" class="modern-input" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-arrows-alt-h"></i>
                                            Transitions
                                        </label>
                                        <input type="number" name="TransitionCount" value="8" min="0" class="modern-input" />
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-font"></i>
                                            Alphabet Size
                                        </label>
                                        <input type="number" name="AlphabetSize" value="3" min="1" max="10" class="modern-input" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-check-circle"></i>
                                            Accepting Ratio
                                        </label>
                                        <input type="number" step="0.05" name="AcceptingStateRatio" value="0.3" min="0" max="1" class="modern-input" />
                                    </div>
                                </div>
                                
                                <button type="submit" class="modern-btn btn-success btn-full">
                                    <i class="fas fa-cogs"></i>
                                    Generate with Parameters
                                </button>
                            </form>
                        </div>

                        <!-- Regex to Automaton -->
                        <div class="input-section-card" data-section-id="regex">
                            <div class="section-card-header">
                                <i class="fas fa-code"></i>
                                <h4>From Regular Expression</h4>
                            </div>
                            <div class="section-card-body">
                                
                                <!-- Custom Regex Input -->
                                <div class="regex-custom-section">
                                    <form id="regexCustomForm" asp-controller="Regex" asp-action="BuildFromRegex" method="post">
                                        @Html.AntiForgeryToken()
                                        <div class="form-group">
                                            <label for="regexInput" class="form-label">
                                                <i class="fas fa-terminal"></i>
                                                Regular Expression
                                            </label>
                                            <input 
                                                type="text" 
                                                id="regexInput" 
                                                name="regex" 
                                                class="modern-input" 
                                                placeholder="e.g., (a|b)*c"
                                                autocomplete="off"
                                                spellcheck="false"
                                                aria-describedby="regexValidationFeedback"
                                            />
                                            <div id="regexValidationFeedback" class="regex-validation-feedback" style="display:none;" role="alert"></div>
                                        </div>
                                        
                                        <button type="submit" class="modern-btn btn-primary btn-full" id="regexSubmitBtn" aria-label="Convert regular expression to automaton">
                                            <i class="fas fa-cogs"></i>
                                            Convert to Automaton
                                        </button>
                                    </form>
                                </div>

                                <!-- Divider -->
                                <div class="section-divider">
                                    <span>or choose preset</span>
                                </div>

                                <!-- Preset Examples -->
                                <form id="regexPresetForm" asp-controller="Regex" asp-action="BuildFromPreset" method="post">
                                    @Html.AntiForgeryToken()
                                    <div class="form-group">
                                        <label for="regexPresetSelect" class="form-label">
                                            <i class="fas fa-list"></i>
                                            Example Patterns
                                        </label>
                                        <select id="regexPresetSelect" name="presetKey" class="modern-input" aria-describedby="regexPresetInfo">
                                            <option value="">-- Select Example --</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Preset Description Box -->
                                    <div id="regexPresetInfo" class="preset-info-box" style="display:none;">
                                        <p id="regexPresetDescription"></p>
                                        <div class="preset-examples">
                                            <div class="examples-column">
                                                <h5>✓ Accepts</h5>
                                                <ul id="regexAcceptList"></ul>
                                            </div>
                                            <div class="examples-column">
                                                <h5>✗ Rejects</h5>
                                                <ul id="regexRejectList"></ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button type="submit" class="modern-btn btn-success btn-full" id="regexPresetSubmitBtn" disabled aria-label="Generate automaton from preset pattern">
                                        <i class="fas fa-magic"></i>
                                        Generate from Preset
                                    </button>
                                </form>

                                <!-- Help Text -->
                                <details class="regex-help">
                                    <summary>Supported Regex Syntax</summary>
                                    <ul>
                                        <li><strong>Literals:</strong> abc, 123</li>
                                        <li><strong>Operators:</strong> * (zero or more), + (one or more), ? (optional)</li>
                                        <li><strong>Alternation:</strong> a|b (a OR b)</li>
                                        <li><strong>Grouping:</strong> (ab)*</li>
                                        <li><strong>Character Classes:</strong> [abc], [a-z]</li>
                                        <li><strong>Escape:</strong> \* for literal asterisk</li>
                                    </ul>
                                    <p><strong>Not supported:</strong> Negated classes [^abc], lookahead, backreferences</p>
                                </details>
                            </div>
                        </div>

                        <!-- Create Custom Automaton -->
                        <div class="input-section-card card-special" data-section-id="fully-custom">
                            <div class="section-card-header">
                                <i class="fas fa-pencil-ruler"></i>
                                <h4>Manual Creation</h4>
                            </div>
                            <a class="modern-btn btn-info btn-full" href="@Url.Action("CreateAutomaton", "AutomatonCreation")">
                                <i class="fas fa-edit"></i>
                                Create Fully Custom Automaton
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="control-section">
            <div class="section-header-custom">
                <h2 style="margin:0;">EXPORT</h2>
            </div>
            <div class="control-content-left" style="text-align:center; margin-bottom:0.5rem; display:flex; gap:0.5rem; flex-wrap:wrap;">
                @{ 
                    // Helper to render the automaton fields into arbitrary forms
                    void RenderAutomatonHiddenFieldsForForm()
                    {
                        if (Model != null)
                        {
                            <input type="hidden" name="Type" value="@Model.Type" />
                            <input type="hidden" name="Input" value="@Model.Input" />
                            <input type="hidden" name="HasExecuted" value="@Model.HasExecuted.ToString().ToLowerInvariant()" />
                            <input type="hidden" name="Position" value="@Model.Position" />
                            <input type="hidden" name="CurrentStateId" value="@(Model.CurrentStateId.HasValue ? Model.CurrentStateId.ToString() : "")" />
                            <input type="hidden" name="IsAccepted" value="@(Model.IsAccepted.HasValue ? Model.IsAccepted.Value.ToString().ToLowerInvariant() : "")" />
                            <input type="hidden" name="StateHistorySerialized" value="@Model.StateHistorySerialized" />
                            <input type="hidden" name="StackSerialized" value="@Model.StackSerialized" />
                            <input type="hidden" name="IsCustomAutomaton" value="@Model.IsCustomAutomaton.ToString().ToLowerInvariant()" />
                            if (Model.States != null)
                            {
                                for (int i = 0; i < Model.States.Count; i++)
                                {
                                    <input type="hidden" name="States.Index" value="@i" />
                                    <input type="hidden" name="States[@i].Id" value="@Model.States[i].Id" />
                                    <input type="hidden" name="States[@i].IsStart" value="@Model.States[i].IsStart.ToString().ToLowerInvariant()" />
                                    <input type="hidden" name="States[@i].IsAccepting" value="@Model.States[i].IsAccepting.ToString().ToLowerInvariant()" />
                                }
                            }
                            if (Model.Transitions != null)
                            {
                                for (int i = 0; i < Model.Transitions.Count; i++)
                                {
                                    <input type="hidden" name="Transitions.Index" value="@i" />
                                    <input type="hidden" name="Transitions[@i].FromStateId" value="@Model.Transitions[i].FromStateId" />
                                    <input type="hidden" name="Transitions[@i].ToStateId" value="@Model.Transitions[i].ToStateId" />
                                    <input type="hidden" name="Transitions[@i].Symbol" value="@Model.Transitions[i].Symbol" />
                                    if (Model.Type == AutomatonType.PDA)
                                    {
                                        if (Model.Transitions[i].StackPop.HasValue)
                                        {
                                            <input type="hidden" name="Transitions[@i].StackPop" value="@Model.Transitions[i].StackPop" />
                                        }
                                        if (!string.IsNullOrEmpty(Model.Transitions[i].StackPush))
                                        {
                                            <input type="hidden" name="Transitions[@i].StackPush" value="@Model.Transitions[i].StackPush" />
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

                <div class="btn-group">
                    <button type="button" class="control-btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" @(Model == null ? "disabled" : "")>
                        <i class="fas fa-file-export"></i>
                        Export
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <form asp-controller="ImportExport" asp-action="ExportJson" method="post" class="m-0 p-0">
                                @{ RenderAutomatonHiddenFieldsForForm(); }
                                <button type="submit" class="dropdown-item" @(Model == null ? "disabled" : "")>
                                    <i class="fas fa-file-export"></i>
                                    Export JSON
                                </button>
                            </form>
                        </li>
                        <li>
                            <form asp-controller="ImportExport" asp-action="ExportText" method="post" class="m-0 p-0">
                                @{ RenderAutomatonHiddenFieldsForForm(); }
                                <button type="submit" class="dropdown-item" @(Model == null ? "disabled" : "")>
                                    <i class="fas fa-file-download"></i>
                                    Export Text
                                </button>
                            </form>
                        </li>
                        <li>
                            <form asp-controller="ImportExport" asp-action="ExportJsonWithState" method="post" class="m-0 p-0">
                                @{ RenderAutomatonHiddenFieldsForForm(); }
                                <button type="submit" class="dropdown-item" @(Model == null ? "disabled" : "")>
                                    <i class="fas fa-file-archive"></i>
                                    Export With State
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="control-section">
            <div class="section-header-custom">
                <h2 style="margin:0;">IMPORT</h2>
            </div>
            <div class="control-content-left" style="text-align:center; margin-bottom:0.5rem;">
                <form id="importForm" asp-controller="ImportExport" asp-action="ImportAutomaton" method="post" enctype="multipart/form-data" style="display:inline-block;">
                    <div class="form-row" style="display:flex; gap:0.5rem; align-items:center;">
                        <div class="form-group">
                            <input type="file" name="upload" accept=".json,.txt" class="modern-input" />
                        </div>
                        <div class="form-group">
                            <button type="submit" class="control-btn">
                                <i class="fas fa-file-import"></i>
                                Import Automaton
                            </button>
                        </div>
                    </div>
                </form>
                <div style="margin-top:0.5rem;">
                </div>
            </div>
        </div>
        @if (User?.Identity?.IsAuthenticated ?? false)
        {
            <div class="control-section">
                <div class="section-header-custom">
                    <h2 style="margin:0;">SAVE</h2>
                </div>
                <div class="control-content-left" style="text-align:center; margin-bottom:0.5rem;">
                    <button id="openSaveModalBtn" class="control-btn" type="button" style="min-width: 200px;">
                        <i class="fas fa-save"></i>
                        <span>Save Automaton</span>
                    </button>
                </div>

                <!-- Save Modal -->
                <div id="saveAutomatonModal" class="modal modern-modal" style="display:none;">
                    <div class="modal-content modern-modal-content">
                        <div class="modal-header">
                            <div class="modal-header-content">
                                <i class="fas fa-save modal-icon"></i>
                                <h3 class="modal-title">Save Automaton</h3>
                            </div>
                            <button class="modal-close modern-close" id="saveModalClose" type="button">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="saveAutomatonForm" asp-controller="SavedAutomaton" asp-action="Save" method="post" class="modern-form">
                                <div class="form-group">
                                    <label class="form-label">Name</label>
                                    <input type="text" name="name" id="saveName" class="modern-input" required maxlength="200" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description (optional)</label>
                                    <input type="text" name="description" class="modern-input" maxlength="500" />
                                </div>

                                @{ 
                                    // Determine available save options based on execution/input state
                                    var executionStarted = Model?.HasExecuted ?? false;
                                    var hasInput = !string.IsNullOrEmpty(Model?.Input);
                                }
                                <div class="form-group">
                                    <label class="form-label">Save Options</label>

                                    @if (!executionStarted && !hasInput)
                                    {
                                        // No input and execution not started - only structure makes sense
                                        <input type="hidden" name="saveMode" value="structure" />
                                        <div class="form-hint">Only automaton structure will be saved (no input/execution state present).</div>
                                    }
                                    else if (!executionStarted && hasInput)
                                    {
                                        <div>
                                            <label><input type="radio" name="saveMode" value="structure" checked /> Automaton only</label>
                                        </div>
                                        <div>
                                            <label><input type="radio" name="saveMode" value="input" /> Include input</label>
                                        </div>
                                    }
                                    else
                                    {
                                        <div>
                                            <label><input type="radio" name="saveMode" value="structure" checked /> Automaton only</label>
                                        </div>
                                        <div>
                                            <label><input type="radio" name="saveMode" value="input" /> Include input</label>
                                        </div>
                                        <div>
                                            <label><input type="radio" name="saveMode" value="state" /> Include execution state</label>
                                        </div>
                                    }
                                </div>

                                @{ 
                                    // render hidden automaton fields (duplicate of export helper)
                                    void RenderAutomatonHiddenFieldsForSave()
                                    {
                                        if (Model != null)
                                        {
                                            <input type="hidden" name="Type" value="@Model.Type" />
                                            <input type="hidden" name="Input" id="saveInputField" value="@Model.Input" />
                                            <input type="hidden" name="HasExecuted" id="saveHasExecuted" value="@Model.HasExecuted.ToString().ToLowerInvariant()" />
                                            <input type="hidden" name="Position" id="savePosition" value="@Model.Position" />
                                            <input type="hidden" name="CurrentStateId" id="saveCurrentStateId" value="@(Model.CurrentStateId.HasValue ? Model.CurrentStateId.ToString() : "")" />
                                            <input type="hidden" name="IsAccepted" id="saveIsAccepted" value="@(Model.IsAccepted.HasValue ? Model.IsAccepted.Value.ToString().ToLowerInvariant() : "")" />
                                            <input type="hidden" name="StateHistorySerialized" id="saveStateHistorySerialized" value="@Model.StateHistorySerialized" />
                                            <input type="hidden" name="StackSerialized" id="saveStackSerialized" value="@Model.StackSerialized" />
                                            <input type="hidden" name="IsCustomAutomaton" value="@Model.IsCustomAutomaton.ToString().ToLowerInvariant()" />
                                            if (Model.States != null)
                                            {
                                                for (int i = 0; i < Model.States.Count; i++)
                                                {
                                                    <input type="hidden" name="States.Index" value="@i" />
                                                    <input type="hidden" name="States[@i].Id" value="@Model.States[i].Id" />
                                                    <input type="hidden" name="States[@i].IsStart" value="@Model.States[i].IsStart.ToString().ToLowerInvariant()" />
                                                    <input type="hidden" name="States[@i].IsAccepting" value="@Model.States[i].IsAccepting.ToString().ToLowerInvariant()" />
                                                }
                                            }
                                            if (Model.Transitions != null)
                                            {
                                                for (int i = 0; i < Model.Transitions.Count; i++)
                                                {
                                                    <input type="hidden" name="Transitions.Index" value="@i" />
                                                    <input type="hidden" name="Transitions[@i].FromStateId" value="@Model.Transitions[i].FromStateId" />
                                                    <input type="hidden" name="Transitions[@i].ToStateId" value="@Model.Transitions[i].ToStateId" />
                                                    <input type="hidden" name="Transitions[@i].Symbol" value="@Model.Transitions[i].Symbol" />
                                                    if (Model.Type == AutomatonType.PDA)
                                                    {
                                                        if (Model.Transitions[i].StackPop.HasValue)
                                                        {
                                                            <input type="hidden" name="Transitions[@i].StackPop" value="@Model.Transitions[i].StackPop" />
                                                        }
                                                        if (!string.IsNullOrEmpty(Model.Transitions[i].StackPush))
                                                        {
                                                            <input type="hidden" name="Transitions[@i].StackPush" value="@Model.Transitions[i].StackPush" />
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }

                                @{ RenderAutomatonHiddenFieldsForSave(); }

                                <input type="hidden" name="saveState" id="saveStateField" value="false" />
                                <div style="display:flex;gap:0.5rem;justify-content:flex-end;margin-top:0.5rem;">
                                    <button type="button" class="modern-btn" id="saveModalCancel">Cancel</button>
                                    <button type="submit" class="modern-btn btn-success">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="control-section">
                <div class="section-header-custom">
                    <h2>Save</h2>
                </div>
                <div class="control-content-left" style="text-align:center; margin-bottom:0.5rem;">
                    <a class="control-btn" asp-area="Identity" asp-page="/Account/Login">Log in to save automatons</a>
                </div>
            </div>
        }
        <div class="control-section">
            <div class="section-header-custom">
                <h2>PLACEHOLDER</h2>
            </div>
        </div>

        <div class="control-section">
            <div class="section-header-custom">
                <h2>PLACEHOLDER</h2>
            </div>
        </div>
        <div class="control-section">
            <div class="section-header-custom">
                <h2>PLACEHOLDER</h2>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/canvas.js" asp-append-version="true"></script>
    <script type="module" src="~/js/inputOverlay.mjs" asp-append-version="true"></script>
    <script type="module" src="~/js/panelHighlighter.mjs" asp-append-version="true"></script>
    <script type="module" src="~/js/home.mjs" asp-append-version="true"></script>
    <script type="module" src="~/js/simulateControls.mjs" asp-append-version="true"></script>
    <script type="module" src="~/js/automatonTypeControls.mjs" asp-append-version="true"></script>
    <script src="~/js/generateModal.js" asp-append-version="true"></script>
    <script src="~/js/generateInputModal.js" asp-append-version="true"></script>
    <script src="~/js/regexModal.js" asp-append-version="true"></script>
    <script src="~/js/alerts.js" asp-append-version="true"></script>
    <script src="~/js/saveAutomatonModal.js" asp-append-version="true"></script>
}
